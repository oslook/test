<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>基因测试你适合开什么车</title>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta name="viewport" content="target-densitydpi=320,width=640,user-scalable=no"/>

<script src="../js/jquery.min.js"></script>
<link href="./css/reset.css" rel="stylesheet">
<link href="./css/zq2.css" rel="stylesheet">
<script src="./js/Cmn.js"></script>
<script src="./js/CmnAjax.js"></script>
<script src="./js/CmnFuncExd.js"></script>


<script src="http://static.adwo.com/jssdk/jssdk.min.js"></script>
<script type="text/javascript">
var test = new adwojs({
eid:'spn', //节点id
aid: '019d70f4408d4fa18c5ae574644db483', //android安卓PID
pid: '029aad4ebdb34f3fa38c29b79408788d', //iOS PID
bt: false,
af:true, //是否自动适合ipad平板广告，默认值为true。
width: 320, //广告图片宽度(除320外，还有720宽度，用于ipad中显示)
height:50  //广告图片高度(除50外，还有110高度，用于ipad中显示)

});
test.send();

//关闭按钮
function closeADFunc() {
document.getElementById('hideADbtn').style.display='none';
document.getElementById('spn').style.display='none';
}
</script>
<script type="text/javascript" src="../js/count.js"></script>   
<script type="text/javascript">
var spid="10-26-1";
</script>	
<script>
$(document).ready(function () {
Cmn.Func.ImageLazyLoading(".main_wrap", function () {
}, function () {
$(".jscPreloader").hide();
})
});
</script>
    <script>
        $(function () {
            var _Interval = 0;
            var _step = 1;
            $(".jscFingerprintRegional").on("mousedown touchstart", function (e) {
                var ev = e.touches ? e.touches[0] : e;
                $(".jscTestText").html("等待扫描");
                $(".DiffusionRound").addClass("DiffusionRoundscaleout");
                $(".jscRotateRound").addClass("ZhRound");
                _IsStop = true;
                $(".jscFingerprintArrowLeft").stop(true, true).animate({ left: "80px" }, 300);
                $(".jscFingerprintArrowRight").stop(true, true).animate({ right: "80px" }, 300);
                _Interval = window.setInterval(function () {
                    _step++;
                    if (_step > 3) {
                        $(".jscFingerprint img").show();
                        $(".jscTestText").html("扫描成功！");
                        $(".jscTestTipImg").eq(0).hide().siblings().show();
                        window.setTimeout(function () {
                            //页面跳转
                            $(".step01").hide();
                            $(".step02").show();
                            start_play2();
                        }, 800);
                    }
                }, 1000);

                ev.preventDefault();

            });
            $(".jscFingerprintRegional").on("mouseup touchend", function () {
                $(".DiffusionRound").removeClass("DiffusionRoundscaleout");
                $(".jscRotateRound").removeClass("ZhRound");
                //按下超过4秒
                if (_step > 3) {
                    window.setTimeout(function () {
                        //页面跳转
                        $(".step01").hide();
                        $(".step02").show();
                        start_play2();
                    }, 800);
                }
                else {//不超过四秒
                    window.clearInterval(_Interval);
                    _step = 0;
                    _IsStop = false;
                    ArrowAnimate();
                    $(".jscTestTipImg").eq(1).hide().siblings().show();
                    $(".jscTestText").html("扫描失败！请继续扫描...");
                }
            });
            var _IsStop = false;
            function ArrowAnimate() {
                if (_IsStop) {
                    return;
                }
                $(".jscFingerprintArrowLeft").stop(true, false).animate({ left: "80px" }, 500, function () {
                    $(this).stop(true, false).animate({ left: "55px" }, 500, function () {
                    })
                })
                $(".jscFingerprintArrowRight").stop(true, false).animate({ right: "80px" }, 500, function () {
                    $(this).stop(true, false).animate({ right: "55px" }, 500, function () {
                        ArrowAnimate();
                    })
                })
            }
            ArrowAnimate();
        });
    </script>
          <script type="text/javascript">
            var r = -1;
			function getRandom(arr){
				var len = arr.length;
				return arr[Math.floor(Math.random()*len)]
			}
			function getRand(){	 
				return Math.floor( Math.random()*10 );
			}
         var dataForWeixin = {
              appId: "",
			  imgUrl: "http://oslook.4lima.ch/test/"+spid+"/icon.jpg",
			   url: "http://oslook.4lima.ch/test/"+spid+"/index.html",
              title: "基因测试你适合开什么车",
              desc: "赶快来测试一下吧"
        };

        var onBridgeReady = function(){
            WeixinJSBridge.on('menu:share:appmessage', function(argv){
               var infos = $("#infos").text();  
				var	num = $("#infos").attr("num");				   

                WeixinJSBridge.invoke('sendAppMessage', {
                    "appid": dataForWeixin.appId,
                    "img_url":dataForWeixin.TLImg+"0"+num+".jpg",
                    "img_width": "120",
                    "img_height": "120",
                    "link": dataForWeixin.url,
                    "title": infos + dataForWeixin.title,
                    "desc": dataForWeixin.desc 
                });
         setTimeout(function () {location.href = "#";}, 1500); 
            });
            WeixinJSBridge.on('menu:share:timeline', function(argv){
                var infos = $("#infos").text(); 
				var	num = $("#infos").attr("num");			

                WeixinJSBridge.invoke('shareTimeline', {
                    "appid": dataForWeixin.appId,
                    "img_url":dataForWeixin.TLImg+"0"+num+".jpg",
                    "img_width": "120",
                    "img_height": "120",
                    "link": dataForWeixin.url,
                    "title": infos + dataForWeixin.title,
                    "desc": dataForWeixin.desc
                });
		setTimeout(function () {location.href = "#";}, 1500);  
            });
        };
        if(document.addEventListener){
            document.addEventListener('WeixinJSBridgeReady', onBridgeReady, false);
        }else if(document.attachEvent){
            document.attachEvent('WeixinJSBridgeReady', onBridgeReady);
            document.attachEvent('onWeixinJSBridgeReady', onBridgeReady);
        }   
          </script>

      <style type="text/css">
        .ScanningBottomLi p{
		  font-size: 1.2em
		}
		.ScanningRoundWrap{
		  top: 130px;
		}
		.ScanningBottom{
		  top: 570px;
		}
		.testResultButton{
position: fixed;
top: 0;
left: 0;
width: 620px;
text-align: center;
margin-top:20px;
}
			#mask {
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		display: none;
		background-color: #333;
		-moz-opacity: 0.9;
		opacity: 0.9;
	}
	#tip {
		display: none;
		position: absolute;
		width: 100%;
		top: 10px;
		left: 15px;
	}
	#tip img{
		width:90%;
		margin:0 auto;
		text-align:center;
	}
	#resHtml{
	width: 640px;overflow: hidden;
	position: relative;
	left:0;
	}
	.a_1{
		float:left;
	}
	.text {
    color: #727272;
    font-size: 14px;
    margin: 30px 0 15px;
    word-wrap: break-word;
}
#mess_share {
    display: block;
    margin: 15px 0;
}
.tool-button {
    margin: 0 auto;
    text-align: center;
    width: 630px;
	text-align: center;
	padding-bottom: 2em;
	font-weight: bold;
	font-family: "黑体";
}
      </style>
    </head>
    <body style="background-color:#FaF9F9; padding-top: 10px">
    <body style="width: 640px; background-color: rgb(250, 249, 249); " screen_capture_injected="true">
<div id="preloader" class="jscPreloader" style="display: none;">
    <div class="spinner-wrap">
        <div class="spinner">
            <i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i>
        </div>
    </div>
</div>

<div class="main_wrap" >
    <div class="main">
        <div class="step01">
            <div class="touch_box">
                <img src="./image/bg_2.jpg" class="bj">
                <img src="./image/15.png" class="test_title01">

                <div class="ZwWrap">
                    <!--指纹触发区域-->
                        <span style="outline: none; -webkit-tap-highlight-color: rgba(0,0,0,0); -moz-user-select: none; -webkit-user-select: none; "
                              class="FingerprintRegional jscFingerprintRegional">
                        </span>
                </div>
                <div class="FingerprintTestWrap">
                    <!--需要转的断圆-->
                    <div class="Position jscRotateRound">
                        <img src="./image/ZhRound2.png"></div>
                    <!--指纹-->
                    <div class="Position FingerprintPic jscFingerprint">
                        <img style="display:none;" src="./image/FingerprintPic.png">
                    </div>
                    <!--箭头左-->
                    <div class="Position FingerprintArrowLeft jscFingerprintArrowLeft" style="left: 74.84731565365591px;">
                        <img src="./image/FingerprintArrowLeft.png">
                    </div>
                    <!--箭头右-->
                    <div class="Position FingerprintArrowRight jscFingerprintArrowRight" style="right: 74.84731565365591px;">
                        <img src="./image/FingerprintArrowRight.png">
                    </div>

                    <!--外围向外扩散的圆-->
                    <div class="DiffusionRound">

                    </div>
                </div>
                <!--提示-->
                <div class="Position PromptStatement">
                    <h1>
                        <!--红灯-->
                        <img class="jscTestTipImg" src="./image/RedLight.png">
                        <!--绿灯-->
                        <img class="jscTestTipImg" style="display:none;" src="./image/Green.png">
                    </h1>

                    <p class="jscTestText">等待扫描</p>
                </div>
            </div>
        </div>
        <div class="step02" style="display: none">
            <div class="touch_box">
                <img src="./image/bg.jpg" class="bj">
                <img src="./image/title3.png" class="test_title01">
                <!--扫描圆区域-->
                <div class="ScanningRoundWrap">
                    <!--内圆-->
                    <div class="ScanningRoundInner">
                        <!--四个角-->
                        <div class="RoundInnerBg rotate"><img src="./image/RoundInnerBg.png">
                        </div>
                        <!--头像-->
                        <div class="ScanningTx">
                            <img src="./image/manTx2.png">
                        </div>
                        <!--红线扫描-->
                        <div class="ScanningLine jscScanningLine analysis" style="top: 24.970748252969372px;"><img src="./image/Line.png"></div>
                        <!--Mask遮罩PNG-->
                        <div class="MaskPNG">
                            <img src="./image/MaskPng.png">
                        </div>
                        <!--分析扫描-->
                        <div class="AnalysisText" style="">
                            <span class="jscAnalysisText" style="margin: auto; display: block; text-align: left; width: 120px; color: inherit; font-size: inherit; ">正在扫描分析</span>
                        </div>
                    </div>
                </div>
                <div class="ScanningBottom">
                    <div class="ScanningBottomUl">
                        <div class="ScanningBottomLi">
                            <h1>
                                <canvas id="jscReaderInfo" width="133" height="133" style="background: url(./image/ReadDataIcon.png) no-repeat; background-size:cover; "></canvas>

                            </h1>
                            <p>1-8染色体分析</p>
                        </div>
                        <div class="ScanningBottomLi">
                            <h1>
                                <canvas id="jscAnalysisFriends" width="133" height="133" style="background: url(./image/SharePyIcon.png) no-repeat; background-size: cover; "></canvas>
                            </h1>
                            <p>9-18染色体分析</p>
                        </div>
                        <div class="ScanningBottomLi">
                            <h1>
                                <canvas id="jscTestYouPhoto" width="133" height="133" style="background: url(./image/SaoMiaoPohotIcon.png) no-repeat; background-size: cover; "></canvas>
                            </h1>
                            <p>19-23染色体分析</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="HomeButton">
        </div>
    </div>
</div>
<div id="infos" style="display:none" num="1" stype="1"></div>

<div id="resHtml" style="display:none;">
	<div id="share" style="display: none">
		<img width="100%" src="./image/share.png" style="position: fixed; z-index: 9999; top: 0; left: 0;">
	</div>
	<img id="resPic" src="./image/1.jpg"/>
	<div class="testResultButton">
		<span class="a_1">
			<img  id="share-button" width="223px" src="./image/GoLotteryButton.png" />
		</span>
		<a href="javascript:;" class="a_2">
			<img src="./image/AgainTestButton.png" />
		</a>
	</div>
	<div class="tool-button">
		<div style="position: absolute;text-align: center;top:160px;width: 640px;font-size:2.4em;color:#000000;" id="res1"></div>
		<div style="position: absolute;text-align: center;top:800px;width: 640px;font-size:2em;color:#000000;">赶快把结果分享到朋友圈，让TA们羡慕去吧！</div>
	</div>
</div>

<script type="text/javascript">
    var pageTimer = {};
    Cmn.Func.MobileAdaptive(640, "", "", Cmn.Func.MobileAdaptiveMode.WidthCutOutHeight);
    function ScanningLineAnimte() {
        $(".jscScanningLine").animate({ top: "370px" }, 1800, function () {
            $(this).animate({ top: "0px" }, 1800, function () {
                ScanningLineAnimte();
            })
        })
    }
    ScanningLineAnimte();
    var DotCount = 3;
    var AnalysisTextAnimte = function () {

        var _dot = "";
        for (var _i = 0; _i < DotCount; _i++) {
            _dot = _dot + ".";
        }
        $(".jscAnalysisText").html("正在扫描分析" + _dot);

        window.setTimeout(function () {
            DotCount--;
            if (DotCount < 0) {
                DotCount = 3;
            }
            AnalysisTextAnimte();
        }, 500);
    }
    AnalysisTextAnimte();
    var DrawAct = (function () {

        var _DrawAct = function (opt) {
            var _self = this;
            _self.o = {
                canvas: "",
                color: "#e00a23",
                speed: 15,
                lineWidth: 8.0,
                radius: 94 / 2,
                x: 134 / 2,
                y: 134 / 2,
                callback: function () {
                }
            }
            _self.o = $.extend(_self.o, opt);
            _self.canvaso = $(_self.o.canvas)[0];
            _self.ctx = _self.canvaso.getContext('2d');
            _self.width = $(_self.o.canvas).width();
            _self.height = $(_self.o.canvas).height();
            _self.inteval = 0;
        }
        _DrawAct.prototype = {
            Start: function () {

                var _self = this;
                _self.ctx.strokeStyle = _self.o.color;
                _self.ctx.shadowColor = "#df5c6b";
                _self.ctx.lineWidth = 9.0;
                _self.ctx.shadowBlur = 20;
                var _step = 1, _stepMax = 100, _startAngle = 0, _endAngle, _add = Math.PI * 2 / 100;

                _self.inteval = setInterval(function () {
                    if (_step <= _stepMax) {
                        _endAngle = _startAngle + _add;
                        _self.ctx.beginPath();
                        _self.ctx.arc(_self.o.x, _self.o.y, _self.o.radius, _startAngle, _endAngle, false);
                        _self.ctx.lineWidth = _self.o.lineWidth;
                        _self.ctx.stroke();
                        _startAngle = _endAngle;
                        _step++;
                    } else {
                        clearInterval(_self.inteval);
                        _self.inteval = null;
                        _self.o.callback();
                    }
                }, _self.o.speed);
            }
        }
        return function (opt) {
            return new _DrawAct(opt);
        }

    })();

    var start_play2 = function (){
		var a = 1;
        //loading
        DrawAct({
            canvas: "#jscReaderInfo", callback: function () {
                DrawAct({
                    canvas: "#jscAnalysisFriends", callback: function () {
                        DrawAct({
                            canvas: "#jscTestYouPhoto", callback: function () {
                                //扫描完毕做的事情
							setTimeout(function () {showRes();}, 500); 
							WeixinJSBridge.call('showOptionMenu');
                            }
                        }).Start()
                    }
                }).Start()

            }
        }).Start();

    }

	function showRes(){
		var ss = $("#infos").attr("stype");
		console.log(ss);
		if(ss==1){
			$("#infos").removeAttr("stype");
			$("#infos").attr("stype", "2");
			var number = Math.floor(1+Math.random()*(14-1));
			$("#resPic").removeAttr("src");
			$("#resPic").attr("src", "./image/"+number+".jpg");
			$(".main_wrap").hide();
			$("#resHtml").show();
			$("#infos").removeAttr("num");
			$("#infos").attr("num", number);
			var note = "";
			if(number==1){
				note = "原来我适合开劳 斯莱斯幻影呀";
			}else if(number==2){
				note = "原来我适合开Jeep的大切诺基啊";
			}else if(number==3){
				note = "原来我适合开路虎";
			}else if(number==4){
				note = "原来我适合开保时捷";
			}else if(number==5){
				note = "原来我适合开奥迪Q7呀";
			}else if(number==6){
				note = "原来我适合开保时捷911呀";
			}else if(number==7){
				note = "原来我适合开凯迪拉克";
			}else if(number==8){
				note = "原来我适合开宝马 x6呀";
			}else if(number==9){
				note = "原来我适合开奔驰呀";
			}else if(number==10){
				note = "原来我适合开宾利呀";
			}else if(number==11){
				note = "原来我适合开捷豹呀";
			}else if(number==12){
				note = "原来我适合开兰博基尼呀";
			}else if(number==13){
				note = "原来我适合开大众的辉腾";
			}else{
				note = "原来我适合开法拉利";
			}
			$("#res1").html("经鉴定："+note+"，");
			$("#infos").html("哇！"+note+"，");
			
			return false;
			}
	}
	$(".a_2").click(function(){
		location.href = location.href;
	});
	$("#share-button").click(function(){
	  $("#share").show();
	  	});

	$("#share").click(function(){
	  $(this).hide();
	});
			//openCount(spid);
</script>

<img id="hideADbtn" src="../image/closebtn.png" style="position:fixed; z-index:9999; bottom:50px; right:0;" ontouchstart="closeADFunc();">
<div id="spn" style="position:fixed; bottom:0;right:0;z-index:9999;height:50px;width:320px;"></div>

<div style="display:none;">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fe790b64cf9b706fab95d6dc6fa5838fe' type='text/javascript'%3E%3C/script%3E"));
</script></div>

</html>
