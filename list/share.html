<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width,height=device-height,inital-scale=1.0,maximum-scale=1.0,user-scalable=no;">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no">
    <title>分享给朋友</title>
    <script type="text/javascript" src="../js/jquery.min.js"></script>
<body style="TEXT-ALIGN: center;overflow-y:hidden;height:500px;">
<style>
	html, body, div, object, pre, code, h1, h2, h3, h4, h5, h6, p, span, em, cite, del, a, img, ul, li, ol, dl, dt, dd, fieldset, legend, form, input, button, textarea, header, section, footer, article, nav, aside, menu, figure, figcaption {
	margin:0;
	padding:0;
	font-family:Microsoft YaHei,Helvitica,Verdana,Tohoma,Arial,san-serif;
	outline:none
}
	fieldset, img {
	border:0;
}
html, body {
	width:100%;
	overflow-x:hidden
}
html {
	-webkit-text-size-adjust:none;
}
body {
	font-family:Microsoft YaHei,Helvitica,Verdana,Tohoma,Arial,san-serif;
	margin:0;
	padding: 0;
	color:#666;text-decoration: none;
	background-color:#000;
	font-size:14px;
}

a {
	text-decoration:none;
	color:#464646;
	outline:none;
}
a, li, input, button {
	outline:none;
}
	.sharemcover {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: rgba(0, 0, 0, 0.7);
display: none;
z-index: 20000;
}

</style>
    <div id="sharemcover0" class="sharemcover" style=" display:block;">
		<img src="http://www.oslook.com/share.png" style="width:100%;heigth:100%;">
    </div>
<script type="text/javascript">
function GetRequest() {
   var url = location.search; //获取url中"?"符后的字串
   var theRequest = new Object();
   if (url.indexOf("?") != -1) { 
      var str = url.substr(1);
      strs = str.split("&");
      for(var i = 0; i < strs.length; i ++) { 
         theRequest[strs[i].split("=")[0]]=decodeURIComponent(strs[i].split("=")[1]);
      }
   }
   return theRequest;
}

//调用方法获得参数
var Request = new Object();
Request = GetRequest();
var spid = Request["spid"];
var s = Request["s"];
var t = Request["t"];
var d = Request["d"];
</script>

<script type="text/javascript">
		var mebtnopenurl = "http://oslook.4lima.ch/test/"+spid+"/result.html?s="+s;
        var dataForWeixin = {
			"appId": "",
            "imgUrl": "http://oslook.4lima.ch/test/"+spid+"/icon.jpg",
			"timeLineLink": "",
			"url": "http://oslook.4lima.ch/test/"+spid+"/index.html",
			"title": decodeURIComponent(t),
            "desc": decodeURIComponent(d)
        };
        document.addEventListener('WeixinJSBridgeReady', function onBridgeReady() {
		 WeixinJSBridge.call('showOptionMenu');
		WeixinJSBridge.on("menu:general:share",function(s){
			s.generalShare({
				"appid": dataForWeixin.appId,
				"img_url": dataForWeixin.imgUrl,
				"img_width": "640",
				"img_height": "640",
				"link": dataForWeixin.url,
				"desc": dataForWeixin.desc,
				"title": dataForWeixin.title
				},function(e){
					if(e.err_msg=="general_share:ok"){
					//share ok:
						setTimeout(function () {location.href = mebtnopenurl;}, 1500);
					}else{
					//share err:
					
					};
				});
		});
		
		WeixinJSBridge.on('menu:share:appmessage', function(argv) {
				WeixinJSBridge.invoke('sendAppMessage', {
				   "appid": dataForWeixin.appId,
					"img_url": dataForWeixin.imgUrl,
					"link": dataForWeixin.url,
					"desc": dataForWeixin.desc,
					"title": dataForWeixin.title
				});
				setTimeout(function () {location.href = mebtnopenurl;}, 1500);
			});


	  	WeixinJSBridge.on('menu:share:timeline', function(argv) {
				WeixinJSBridge.invoke('shareTimeline', {
				   "appid": dataForWeixin.appId,
					"img_url": dataForWeixin.imgUrl,
					"img_width": "640",
					"img_height": "640",
					"link": dataForWeixin.url,
					"desc": dataForWeixin.desc,
					"title": dataForWeixin.title
				});
				setTimeout(function () {location.href = mebtnopenurl;}, 1500);
			});

		}, false);
    </script>
    </div>
    <script type="text/javascript">
        document.addEventListener('WeixinJSBridgeReady', function onBridgeReady() {
            WeixinJSBridge.call('hideToolbar');
        });
    </script>
	<div style="display:none;">
		<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fe790b64cf9b706fab95d6dc6fa5838fe' type='text/javascript'%3E%3C/script%3E"));
</script>
	</div>
</body>

</html>